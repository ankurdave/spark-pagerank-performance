#!/bin/bash

# Parse log files
./bin/parse

# Aggregate results into result files
echo -n > results-28nodes.dat
./bin/aggregate hadoop >> results-28nodes.dat
./bin/aggregate notcontrolled-nocombiner-28nodes >> results-28nodes.dat
./bin/aggregate controlled-nocombiner-28nodes >> results-28nodes.dat
./bin/aggregate notcontrolled-combiner-28nodes >> results-28nodes.dat
./bin/aggregate controlled-combiner-28nodes >> results-28nodes.dat

echo -n > results-28nodes-iter1.dat
./bin/aggregate hadoop 2>> results-28nodes-iter1.dat >/dev/null
./bin/aggregate notcontrolled-nocombiner-28nodes 2>> results-28nodes-iter1.dat >/dev/null
./bin/aggregate controlled-nocombiner-28nodes 2>> results-28nodes-iter1.dat >/dev/null
./bin/aggregate notcontrolled-combiner-28nodes 2>> results-28nodes-iter1.dat >/dev/null
./bin/aggregate controlled-combiner-28nodes 2>> results-28nodes-iter1.dat >/dev/null

# Plot results
./bin/compare.plt